GPU=1
b1_type=[conservation_sinflux,inviscid_conservation_cubicflux,inviscid_burgers,conservation_cubicflux,inviscid_conservation_sinflux,heat]
ood_type=[burgers,conservation_linearflux,conservation_sinflux,conservation_cubicflux,inviscid_burgers,inviscid_conservation_sinflux,inviscid_conservation_cubicflux,advection,diff_bistablereact_1D,fplanck,heat,Klein_Gordon,diff_linearreact_1D,diff_squarelogisticreact_1D,cahnhilliard_1D,Sine_Gordon,kdv,diff_logisreact_1D,wave]
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=base_extrapolation_time_v1 use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=1024 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_types=-1 data.eval_types=-1  save_periodic=-1 &&
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=base_no_text use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=1024 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_types=-1 data.eval_types=-1  save_periodic=-1 model.no_text_encoder=true &&

CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=base_extrapolation_known_v4 use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_types=-1 data.eval_types=-1  save_periodic=-1 model.no_text_decoder=false symbol.use_skeleton=false
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=base_extrapolation_skeleton_v4 use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_types=-1 data.eval_types=-1  save_periodic=-1 model.no_text_decoder=false symbol.use_skeleton=true

CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_base_extrapolation_known eval_from_exp=checkpoint/jingmins/dumped/pde/base_extrapolation_known_v4 eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.train_types=-1 data.eval_types=-1 noise=0 model.no_text_decoder=false symbol.use_skeleton=false
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_base_extrapolation_skeleton eval_from_exp=checkpoint/jingmins/dumped/pde/base_extrapolation_skeleton_v4 eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.train_types=-1 data.eval_types=-1 noise=0 model.no_text_decoder=false symbol.use_skeleton=true plot_worst=true


ratio_set=(0.2 0.5 1.0 2.0 5.0)
for ratio in ${ratio_set[@]}; do
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=base_ablation_ratio_${ratio} use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_types=-1 data.eval_types=-1  save_periodic=-1 model.no_text_decoder=false symbol.use_skeleton=true data_symbol_loss_ratio=$ratio
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_base_ablation_ratio_${ratio} eval_from_exp=checkpoint/jingmins/dumped/pde/base_ablation_ratio_${ratio} eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.train_types=-1 data.eval_types=-1 noise=0  model.no_text_decoder=false symbol.use_skeleton=true data_symbol_loss_ratio=$ratio
done

input_size=(2 4 8 16)
for size in ${input_size[@]}; do
input_len=$(($size*2))
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=base_ablation_input_${size} use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_types=-1 data.eval_types=-1  save_periodic=-1 model.no_text_decoder=false symbol.use_skeleton=true input_len=$input_len output_start=32
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_base_ablation_input_${size} eval_from_exp=checkpoint/jingmins/dumped/pde/base_ablation_input_${size} eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.train_types=-1 data.eval_types=-1 noise=0  model.no_text_decoder=false symbol.use_skeleton=true input_len=$input_len output_start=32
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=base_no_text_ablation_input_${size} use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_types=-1 data.eval_types=-1  save_periodic=-1 model.no_text_encoder=true symbol.use_skeleton=true input_len=$input_len output_start=32
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_base_no_text_ablation_input_${size} eval_from_exp=checkpoint/jingmins/dumped/pde/base_no_text_ablation_input_${size} eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.train_types=-1 data.eval_types=-1 noise=0  model.no_text_encoder=true symbol.use_skeleton=true input_len=$input_len output_start=32

done


CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=base_inputIC_v1 use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=1024 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_types=-1 data.eval_types=-1  save_periodic=-1 input_len=1 input_step=1
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=base_inputIC_no_text use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=1024 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_types=-1 data.eval_types=-1  save_periodic=-1 input_len=1 input_step=1 model.no_text_encoder=true

CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=base_extrapolation_type_v1 use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=1024 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_types=$b1_type data.eval_types=burgers save_periodic=-1

CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id="eval" eval_from_exp=checkpoint/jingmins/dumped/pde/base_extrapolation_time_v1 eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.train_types=-1 data.eval_types=-1 noise=0
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=ood0.12_eval eval_from_exp=checkpoint/jingmins/dumped/pde/base_extrapolation_time_v1 eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.eval_types=$ood_type data.train_data=ood0.12 data.eval_data=ood0.12 noise=0
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=ic_eval eval_from_exp=checkpoint/jingmins/dumped/pde/base_extrapolation_time_v1 eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512   data.eval_types=$ood_type data.train_data=ICextr data.eval_data=ICextr noise=0
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=type_eval eval_from_exp=checkpoint/jingmins/dumped/pde/base_extrapolation_type_v1 eval_only=1 use_wandb=1 eval_size=102400 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.eval_types=burgers noise=0


CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_no_text eval_from_exp=checkpoint/jingmins/dumped/pde/base_no_text eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.train_types=-1 data.eval_types=-1 noise=0 model.no_text_encoder=true
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_base_inputIC eval_from_exp=checkpoint/jingmins/dumped/pde/base_inputIC_v1 eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.train_types=-1 data.eval_types=-1 noise=0 input_len=1 input_step=1
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_base_inputIC_no_text eval_from_exp=checkpoint/jingmins/dumped/pde/base_inputIC_no_text eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.train_types=-1 data.eval_types=-1 noise=0 input_len=1 input_step=1  model.no_text_encoder=true

CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=ood0.12_eval_no_text eval_from_exp=checkpoint/jingmins/dumped/pde/base_no_text eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.eval_types=$ood_type data.train_data=ood0.12 data.eval_data=ood0.12 noise=0 model.no_text_encoder=true
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=ic_eval_no_text eval_from_exp=checkpoint/jingmins/dumped/pde/base_no_text eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512   data.eval_types=$ood_type data.train_data=ICextr data.eval_data=ICextr noise=0 model.no_text_encoder=true

CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=ood0.12_eval_inputIC eval_from_exp=checkpoint/jingmins/dumped/pde/base_inputIC_v1 eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.eval_types=$ood_type data.train_data=ood0.12 data.eval_data=ood0.12 noise=0 input_len=1 input_step=1
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=ic_eval_inputIC eval_from_exp=checkpoint/jingmins/dumped/pde/base_inputIC_v1 eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512   data.eval_types=$ood_type data.train_data=ICextr data.eval_data=ICextr noise=0 input_len=1 input_step=1

CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=ood0.12_eval_inputIC_no_text eval_from_exp=checkpoint/jingmins/dumped/pde/base_inputIC_no_text eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.eval_types=$ood_type data.train_data=ood0.12 data.eval_data=ood0.12 noise=0 input_len=1 input_step=1 model.no_text_encoder=true
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=ic_eval_inputIC_no_text eval_from_exp=checkpoint/jingmins/dumped/pde/base_inputIC_no_text eval_only=1 use_wandb=1 eval_size=5120 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512   data.eval_types=$ood_type data.train_data=ICextr data.eval_data=ICextr noise=0 input_len=1 input_step=1  model.no_text_encoder=true


CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=shock_rarefaction_exp1 use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=1024 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_data_pairs=[burgers.one_shock,inviscid_burgers.rarefaction,conservation_cubicflux.rarefaction,inviscid_conservation_cubicflux.rarefaction,conservation_cosflux.rarefaction,inviscid_conservation_cosflux.rarefaction] data.eval_data_pairs=[burgers.rarefaction]  save_periodic=-1 &&
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=shock_rarefaction_exp2 use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=1024 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_data_pairs=[burgers.one_shock,inviscid_burgers.one_shock,conservation_cubicflux.rarefaction,inviscid_conservation_cubicflux.rarefaction,conservation_cosflux.rarefaction,inviscid_conservation_cosflux.rarefaction] data.eval_data_pairs=[burgers.rarefaction]  save_periodic=-1 &&
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=shock_rarefaction_exp3 use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=1024 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_data_pairs=[burgers.one_shock,inviscid_burgers.one_shock,conservation_cubicflux.one_shock,inviscid_conservation_cubicflux.rarefaction,conservation_cosflux.rarefaction,inviscid_conservation_cosflux.rarefaction] data.eval_data_pairs=[burgers.rarefaction]  save_periodic=-1 &&
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=shock_rarefaction_exp4 use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=1024 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_data_pairs=[burgers.one_shock,inviscid_burgers.one_shock,conservation_cubicflux.one_shock,inviscid_conservation_cubicflux.one_shock,conservation_cosflux.rarefaction,inviscid_conservation_cosflux.rarefaction] data.eval_data_pairs=[burgers.rarefaction]  save_periodic=-1 &&
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=shock_rarefaction_exp5 use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=1024 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_data_pairs=[burgers.one_shock,inviscid_burgers.one_shock,conservation_cubicflux.one_shock,inviscid_conservation_cubicflux.one_shock,conservation_cosflux.one_shock,inviscid_conservation_cosflux.rarefaction] data.eval_data_pairs=[burgers.rarefaction]  save_periodic=-1 &&

CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_shock_rarefaction_exp1 eval_from_exp=checkpoint/jingmins/dumped/pde/shock_rarefaction_exp1 eval_only=1 use_wandb=1 eval_size=20480 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.eval_data_pairs=[burgers.rarefaction] noise=0
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_shock_rarefaction_exp2 eval_from_exp=checkpoint/jingmins/dumped/pde/shock_rarefaction_exp2 eval_only=1 use_wandb=1 eval_size=20480 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.eval_data_pairs=[burgers.rarefaction] noise=0
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_shock_rarefaction_exp3 eval_from_exp=checkpoint/jingmins/dumped/pde/shock_rarefaction_exp3 eval_only=1 use_wandb=1 eval_size=20480 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.eval_data_pairs=[burgers.rarefaction] noise=0
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_shock_rarefaction_exp4 eval_from_exp=checkpoint/jingmins/dumped/pde/shock_rarefaction_exp4 eval_only=1 use_wandb=1 eval_size=20480 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.eval_data_pairs=[burgers.rarefaction] noise=0
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_shock_rarefaction_exp5 eval_from_exp=checkpoint/jingmins/dumped/pde/shock_rarefaction_exp5 eval_only=1 use_wandb=1 eval_size=20480 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.eval_data_pairs=[burgers.rarefaction] noise=0

CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=shock_shocks_exp1 use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=1024 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_data_pairs=[burgers.two_shocks,inviscid_burgers.two_shocks,conservation_cubicflux.one_shock,inviscid_conservation_cubicflux.two_shocks] data.eval_data_pairs=[conservation_cubicflux.two_shocks]  save_periodic=-1 &&
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=shock_shocks_exp2 use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=1024 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_data_pairs=[burgers.two_shocks,inviscid_burgers.two_shocks,conservation_cubicflux.one_shock,inviscid_conservation_cubicflux.one_shock] data.eval_data_pairs=[conservation_cubicflux.two_shocks] save_periodic=-1 &&
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=shock_shocks_exp3 use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=1024 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_data_pairs=[burgers.one_shock,inviscid_burgers.two_shocks,conservation_cubicflux.one_shock,inviscid_conservation_cubicflux.one_shock] data.eval_data_pairs=[conservation_cubicflux.two_shocks]  save_periodic=-1 &&
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=shock_shocks_exp4 use_wandb=1 eval_size=5120 train_size=25600 eval_size_get=-1  train_size_get=-1  batch_size=1024 batch_size_eval=512 n_steps_per_epoch=2000 max_epoch=30  data.train_data_pairs=[burgers.one_shock,inviscid_burgers.one_shock,conservation_cubicflux.one_shock,inviscid_conservation_cubicflux.one_shock] data.eval_data_pairs=[conservation_cubicflux.two_shocks]  save_periodic=-1

CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_shock_shocks_exp1 eval_from_exp=checkpoint/jingmins/dumped/pde/shock_shocks_exp1 eval_only=1 use_wandb=1 eval_size=20480 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.eval_data_pairs=[conservation_cubicflux.two_shocks] noise=0
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_shock_shocks_exp2 eval_from_exp=checkpoint/jingmins/dumped/pde/shock_shocks_exp2 eval_only=1 use_wandb=1 eval_size=20480 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.eval_data_pairs=[conservation_cubicflux.two_shocks] noise=0
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_shock_shocks_exp3 eval_from_exp=checkpoint/jingmins/dumped/pde/shock_shocks_exp3 eval_only=1 use_wandb=1 eval_size=20480 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.eval_data_pairs=[conservation_cubicflux.two_shocks] noise=0
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=eval_shock_shocks_exp4 eval_from_exp=checkpoint/jingmins/dumped/pde/shock_shocks_exp4 eval_only=1 use_wandb=1 eval_size=20480 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=512  data.eval_data_pairs=[conservation_cubicflux.two_shocks] noise=0


#Plot
CUDA_VISIBLE_DEVICES=$GPU python src/main.py  exp_name=pde exp_id=type_eval_plot eval_from_exp=checkpoint/jingmins/dumped/pde/base_extrapolation_type_v1 eval_only=1 use_wandb=1 eval_size=1024 train_size=30720 eval_size_get=-1  train_size_get=-1  batch_size=512 batch_size_eval=64  data.eval_types=burgers log_eval_plots=20 noise=0
